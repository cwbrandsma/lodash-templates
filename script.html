<!DOCTYPE html>
<html>
<head lang="en">
    <meta charset="UTF-8">
    <title></title>
    <link href="./css/bootstrap.min.css" rel="stylesheet">
    <link href="./css/bootstrap-theme.min.css" rel="stylesheet">
</head>
<body class="container">
<div class="page-header">
    <h1>Templating Script Sample</h1>
</div>
<div class="page-body">

</div>

<div class="page-footer">

</div>
<script type="text/javascript" src="js/ven/jquery.js"></script>
<script type="text/javascript" src="js/ven/lodash.js"></script>
<script type="text/javascript" src="js/ven/bootstrap.js"></script>

<script id="mytable" type="text/x-lodash-template" >
    <% var test = 'test' %>
    <div class="table-cntr">
        <h2><%=title%></h2>
        <table class="table table-striped">
            <thead>
            <tr><th>Index</th><th>Name</th><th>Value</th></tr>
            </thead>
            <tbody>
            <%_.each(rows, function(r, i){ %>
            <tr>
                <td><%=i+1%></td>
                <td><%=test + r.title%></td>
                <td><%=r.value%></td>
            </tr>
            <%})%>
            </tbody>
            <tfoot></tfoot>
        </table>
    </div>
</script>

<script type="text/javascript">
    $(function(){
        var model = {
            title:'test 123',
            rows:[ ]
        };

        for(var i=0;i<1000;i++){
            model.rows.push({title:'Row '+i, value:i});
        }

        var txt = $("#mytable").html();

        var tmplText = _.template(txt, model);

        $(".page-body").append(tmplText);

        // global function
        function calc(v){
            return v * 2;
        }

    });

</script>


</body>
</html>